<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <style>
			#myfeed {
				border:1px solid red;
                width: 100%;
                padding-right: 15px;
                padding-left: 15px;
                margin-right: auto;
                margin-left: auto;
			}
			#myfeed div {
                font-size: small;
                color: #fff;
			}
            .eventRow{
                height: 320px;
                display: flex;
                flex-wrap: wrap;
                margin-right: -15px;
                margin-left: -15px;
            }
            .event{
                box-sizing: border-box;
                border: #fff solid 5px;
                background: rgba(51, 51, 51, 1);
                padding: 0px;
                height: 100%;
                flex: 0 0 25%;
            }
            .eventText{
                background: rgba(51, 51, 51, 1);
                padding: 8px;
            }
            .event a{
                font-size: 1em;
                color: #ffcb05;
                font-weight: bold;
                line-height: 150%;
                text-decoration: none;
            }
            .event h3 a{
                text-decoration: underline;
            }
            .event ul{
                padding: 0px;
                margin: 5px 0px 0px 0px;
                list-style-type: none;
        font-size: 12px;
            }
            .event li{
                list-style-type: none;
                font-size: 12px;
                line-height: 1.42857;
            }
            .event h3{
                margin: 0px;
                font-size: 14px;
            }
            .eventImage{
                width: 100%;
                height: 45%;
                object-fit: cover;
            }
		</style>
	</head>
	<body>
		<div id="myfeed"></div>
	</body>
	<script>
	$(function() { // Document ready function

		var url = 'https://events.umich.edu/week/json?v=2' // This is the URL for your JSON feed. In this example it will pull all of todays events.
		
		// Run an ajax call. The documentation is here : http://api.jquery.com/jquery.ajax/
		$.ajax({
		    url: url, // Set the URL for the json feed
            success: function(data) { // Run this if there is a successful call
                if(data.length){ // if anything was returned
                    for(i in data) { // loop though list of objects
                        if(i%4==0){
                            row = '<div class="eventRow">';
                            $('#myfeed').append(row);
                        }
                        html = buildEvent(data[i]); // build html for object
                        $('.eventRow').last().append(html); // append each object to the <div id="myfeed"></div>
                    }
                }
            }
		});

		// create html for object.
		function buildEvent(obj) {
			html = '<div class="event">';
            image = '<img class = "eventImage" src = "'+obj.image_url+'">';
            html += image+'<br>';
            html += '<div class = "eventText">';
            title = obj.combined_title;
			html += '<h3><a href ='+obj.permalink+'>'+title+'</a></h3>';
            date = obj.date_start;
            html += '<ul><li>Date: '+date+'</li>';
            links = obj.links;
            location_name = obj.location_name;
            html+= '<li>Location: '+location_name+'</li></ul>';
            for(let i = 0; i < Object.keys(links).length; i++){
                text = links[i].title == null ? links[i].url: links[i].title;
                link = '<a href = '+links[i].url+'>'+text + '</a>'
                html+= link;
            }
			html += '</div></div>';

			return html;
		}
	});
	</script>
</html>